type,name,label,required,constraint,constraint_message,relevant,appearance,hint,choice_filter,calculation
note,intro_note,"Formulaire réservé aux contributeurs/autorisés. Note: au début du formulaire Kobo, renseignez votre nom d'utilisateur Lokali (ex: amitystokes-63hws7) dans le champ ""Nom d'utilisateur"". Cela permet de lier vos soumissions à votre compte. Pour plus de fiabilité, renseignez également votre identifiant Supabase (ID).",,,,,,,,
text,submitted_username,Votre nom d'utilisateur Lokali,yes,"regex(., '^[A-Za-z0-9._-]{3,32}$')","Utilisez 3–32 caractères: lettres, chiffres, . _ -",,,Saisissez votre nom d'utilisateur Lokali (ex: amitystokes-63hws7).,,
text,submitted_user_id,Votre identifiant Supabase (ID),,string-length(.) = 0 or string-length(.) >= 8,"Facultatif, mais recommandé pour améliorer la fiabilité de l'association compte-soumissions.",,,Renseignez votre identifiant Supabase (ID) pour plus de fiabilité.,,
note,kobo_setup_note,"Configurez KoboCollect/KoboToolbox avec votre compte. Pour plus de fiabilité, renseignez également votre identifiant Supabase (ID).",,,,,,,,
select_one categories,category_id,Catégorie de produit,yes,,,,search,Recherchez par nom de catégorie.,,
text,new_category_name,Nouvelle catégorie,yes,string-length(.) >= 2,2 caractères minimum,${category_id} = 'other',,Écrivez le nom exact.,,
select_one category_types,new_category_type,Type de la catégorie,yes,,,${category_id} = 'other',,Sélectionnez: brut ou transformé.,,
select_one products,product_id,Produit,yes,,,${category_id} != '',search,Filtré par catégorie; recherchez le produit.,category_id=${category_id},
text,new_product_name,Nouveau produit,yes,string-length(.) >= 2,2 caractères minimum,"${product_id} = 'other' or starts-with(${product_id}, 'other_') or ${category_id} = 'other'",,Écrivez le nom exact.,,
select_one localities,locality_id,Commune / Localité,yes,,,,search,Recherchez la commune/localité.,,
text,sub_locality,Village / Quartier / Hameau (optionnel),,,,,,Décrivez la sous-localité précise si utile.,,
decimal,price,Prix (FCFA),yes,. >= 0,Le prix doit être positif,,,,,
select_one units,unit_id,Unité,yes,,,,search,"Recherchez l’unité (ex: kg, l, unité).",,
text,new_unit_name,Nouvelle unité,yes,string-length(.) >= 1,"Indiquez l'unité (ex: kg, l, unité)",${unit_id} = 'other',,Nom d'unité exact.,,
text,new_unit_symbol,Symbole de l'unité (optionnel),,,,${unit_id} = 'other',,"Ex: kg, l, t, u.",,
date,date,Date,yes,. <= today(),La date ne peut pas être future,,,,,
text,comment,Commentaire (optionnel),,string-length(.) <= 500,500 caractères max,,,Informations supplémentaires sur ce prix...,,
note,source_info_note,Les informations de source permettent de vérifier la fiabilité des données.,,,,,,,,
text,source,Nom de la source,yes,,La source est requise pour assurer la fiabilité,,,"Ex: K. Diarra, marché X. Ces informations aident à vérifier la fiabilité des données.",,
select_one source_type,source_type,Type de source,yes,,Sélectionnez le type de source,,,Ces informations aident à vérifier la fiabilité des données.,,
text,source_contact_name,Nom du contact (optionnel),,,,,,,,
text,source_contact_phone,Téléphone du contact (01XXXXXXXX),,"(${source_contact_phone} = '' or regex(${source_contact_phone}, '^01\d{8}$'))",Format attendu: 01XXXXXXXX,,,,,
select_one source_relation,source_contact_relation,Lien du contact (optionnel),,,,,,Utile pour vérifier la fiabilité des données.,,
geopoint,gps,Géolocalisation (idéalement ≤ 10 m),,,,,maps,Activez la haute précision GPS et restez à ciel ouvert.,,
select_one languages,source_language_id,Langue de communication avec la source,,,,,search,Recherchez la langue de communication.,,
text,new_language_name,Nouvelle langue,yes,string-length(.) >= 2,2 caractères minimum,${source_language_id} = 'other',,Nom de langue exact.,,
calculate,sync_create_category,,,,,,,,,"if((${category_id} = 'other') and string-length(${new_category_name}) > 0 and string-length(${new_category_type}) > 0, 1, 0)"
calculate,sync_create_product,,,,,,,,,"if((( ${product_id} = 'other') or starts-with(${product_id}, 'other_') or (${category_id} = 'other')) and string-length(${new_product_name}) > 0, 1, 0)"
calculate,sync_create_unit,,,,,,,,,"if((${unit_id} = 'other') and string-length(${new_unit_name}) > 0, 1, 0)"
calculate,sync_create_language,,,,,,,,,"if((${source_language_id} = 'other') and string-length(${new_language_name}) > 0, 1, 0)"
calculate,submission_source,,,,,,,,,'kobo'
